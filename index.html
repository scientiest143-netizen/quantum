<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>GROW-WIN Quantum Pin-Point Sensor</title>
    <style>
        body { background: #05070a; color: #00ffcc; font-family: 'Courier New', monospace; margin: 0; padding: 20px; text-align: center; }
        .brand-header { color: #ffea00; font-size: 2.5rem; font-weight: bold; text-shadow: 0 0 10px #ffea00; margin-bottom: 5px; }
        .main-container { display: flex; flex-wrap: wrap; justify-content: center; gap: 20px; }
        
        #start-btn { background: #00ffcc; color: #000; padding: 15px 30px; font-weight: bold; border: none; border-radius: 5px; cursor: pointer; font-size: 1.2rem; margin-bottom: 20px; box-shadow: 0 0 15px #00ffcc; }

        .vision-box { position: relative; border: 5px solid #1a1d23; border-radius: 15px; background: #000; overflow: hidden; display: inline-block; width: 100%; max-width: 540px; }
        video { width: 100%; height: auto; display: block; filter: contrast(1.2) brightness(1.1); }
        
        .pin-target { position: absolute; top: 50%; left: 50%; width: 40px; height: 40px; border: 2px dashed #ffea00; transform: translate(-50%, -50%); border-radius: 5px; pointer-events: none; z-index: 10; }
        #spectrometer { width: 100%; height: 140px; background: #000; border: 1px solid #333; margin-top: 10px; border-radius: 5px; }

        .stats-panel { width: 380px; background: #11141b; padding: 20px; border-radius: 15px; border: 1px solid #333; text-align: left; }
        .qubit-card { margin-bottom: 15px; padding: 15px; border-radius: 8px; border-left: 5px solid #444; background: #0a0c10; color: #00ffcc; position: relative; }
        
        /* 3-Line Bloch Sphere Display */
        #vector-circle { width: 90px; height: 90px; border: 2px solid #333; border-radius: 50%; position: absolute; right: 10px; top: 10px; background: radial-gradient(circle, #111, #000); overflow: hidden; }
        .needle { width: 2px; height: 45px; position: absolute; left: 44px; top: 0; transform-origin: bottom; transition: 0.1s; opacity: 0.2; }
        #n-red { background: #ff4b2b; }
        #n-white { background: #ffffff; }
        #n-main { background: #ffea00; width: 3px; opacity: 1; box-shadow: 0 0 10px #ffea00; }
        #q-sym { position: absolute; width: 100%; text-align: center; top: 35px; color: rgba(0, 255, 204, 0.3); font-size: 1.2rem; font-weight: bold; pointer-events: none; }

        .active-row { background: #004466 !important; color: #fff !important; box-shadow: inset 0 0 15px #00ffcc; }

        .truth-table { margin: 30px auto; width: 100%; max-width: 950px; border-collapse: collapse; background: #111; }
        .truth-table th, .truth-table td { border: 1px solid #222; padding: 12px; color: #00ffcc; }
        
        footer { margin-top: 40px; color: #444; font-size: 0.8rem; letter-spacing: 2px; }
    </style>
</head>
<body>

    <div class="brand-header">GROW-WIN</div>
    <h1>QUANTUM PIN-POINT OBSERVER</h1>
    <button id="start-btn">INITIALIZE SYSTEM</button>
    
    <div class="main-container">
        <div class="vision-box">
            <video id="video" autoplay playsinline muted></video>
            <div class="pin-target"></div>
            <canvas id="canvas" width="540" height="405" style="display:none;"></canvas>
            <canvas id="spectrometer"></canvas>
        </div>

        <div class="stats-panel">
            <div id="q1-card" class="qubit-card">
                <small>BLOCH SPHERE (PHASE)</small>
                <div id="q-status" style="font-size: 1.1rem; margin-top:5px;">IDLE</div>
                <div id="vector-circle">
                    <div id="q-sym">Ψ</div>
                    <div id="n-white" class="needle"></div>
                    <div id="n-red" class="needle" style="transform: rotate(180deg)"></div>
                    <div id="n-main" class="needle"></div>
                </div>
            </div>
            
            <div class="qubit-card" style="border-left-color: #00aaff;">
                <small>HARMONIC FREQUENCY</small>
                <div id="hz-text" style="font-size: 1.5rem; color:#ffea00;">0 Hz</div>
                <div id="detect-text" style="font-size: 0.8rem; color:#00aaff;">Scanning for Quantum Gates...</div>
            </div>
            
            <label style="font-size:0.7rem; color:#888;">DETECTION SENSITIVITY</label>
            <input type="range" id="sens" min="30" max="240" value="110" style="width:100%;">
        </div>
    </div>

    <table class="truth-table" id="t-table">
        <thead>
            <tr>
                <th>DETECTION</th>
                <th>Frequency (Hz)</th>
                <th>WAVEFORM</th>
                <th>QUANTUM STATE</th>
            </tr>
        </thead>
        <tbody>
            <tr id="row-red"><td>Red LED</td><td>Stable</td><td>Ground Wave</td><td>|0⟩ (Ground)</td></tr>
            <tr id="row-white"><td>White LED</td><td>Stable</td><td>Valence Wave</td><td>|1⟩ (Valence)</td></tr>
            <tr id="row-super"><td>Dual LED</td><td>Oscillating</td><td>Harmonic Mix</td><td>|ψ⟩ (Superposition)</td></tr>
        </tbody>
    </table>

    <footer>DESIGNED BY UDAYANA ANANTH KUMAR</footer>

    <script>
        const video = document.getElementById('video');
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        const specCanvas = document.getElementById('spectrometer');
        const sCtx = specCanvas.getContext('2d');
        const startBtn = document.getElementById('start-btn');
        
        const nMain = document.getElementById('n-main');
        const nRed = document.getElementById('n-red');
        const nWhite = document.getElementById('n-white');
        const qSym = document.getElementById('q-sym');

        let lastBrightness = 0, pulses = 0, lastTime = Date.now();
        let rWave = new Array(100).fill(110);
        let wWave = new Array(100).fill(30);

        startBtn.onclick = () => {
            navigator.mediaDevices.getUserMedia({ 
                video: { facingMode: "environment", frameRate: { ideal: 60 } } 
            }).then(s => {
                video.srcObject = s;
                startBtn.style.display = 'none';
                detect();
            });
        };

        function drawWaves(hz, hasRed, hasWhite) {
            sCtx.fillStyle = "black";
            sCtx.fillRect(0,0, specCanvas.width, specCanvas.height);
            rWave.shift(); wWave.shift();
            
            let time = Date.now() / 50;
            let isMixing = hasRed && hasWhite;
            
            // Red = Ground (Bottom), White = Valence (Top)
            let rPos = hasRed ? 100 + (Math.sin(time) * (hz * 1.5)) : 120;
            let wPos = hasWhite ? 40 + (Math.cos(time) * (hz * 1.5)) : 30;
            
            if(isMixing) {
                rPos -= 30;
                wPos += 30;
            }

            rWave.push(rPos); wWave.push(wPos);

            sCtx.lineWidth = 2;
            sCtx.beginPath(); sCtx.strokeStyle = "#ffffff";
            for(let i=0; i<100; i++) sCtx.lineTo((specCanvas.width/100)*i, wWave[i]);
            sCtx.stroke();

            sCtx.beginPath(); sCtx.strokeStyle = "#ff4b2b";
            for(let i=0; i<100; i++) sCtx.lineTo((specCanvas.width/100)*i, rWave[i]);
            sCtx.stroke();
            
            nMain.style.transform = `rotate(${hz * 12}deg)`;
            nRed.style.opacity = hasRed ? "1" : "0.1";
            nWhite.style.opacity = hasWhite ? "1" : "0.1";
        }

        function detect() {
            ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
            const data = ctx.getImageData(canvas.width/2-20, canvas.height/2-20, 40, 40).data;
            const threshold = parseInt(document.getElementById('sens').value);

            let rH = 0, wH = 0, totalB = 0;
            for (let i = 0; i < data.length; i += 4) {
                let r = data[i], g = data[i+1], b = data[i+2];
                totalB += (r + g + b) / 3;
                if (r > threshold && g < threshold/1.3) rH++; // Red
                if (r > threshold && g > threshold/1.1 && b > threshold/1.1) wH++; // White
            }

            let avgB = totalB / (data.length / 4);
            if (Math.abs(avgB - lastBrightness) > 10) pulses++;
            lastBrightness = avgB;

            if (Date.now() - lastTime >= 1000) {
                let currentHz = Math.floor(pulses / 2);
                document.getElementById('hz-text').innerText = currentHz + " Hz";
                updateUI(rH > 8, wH > 8, currentHz);
                pulses = 0; lastTime = Date.now();
            }
            drawWaves(pulses, rH > 8, wH > 8); 
            requestAnimationFrame(detect);
        }

        function updateUI(red, white, hz) {
            document.querySelectorAll('tr').forEach(t => t.classList.remove('active-row'));
            const status = document.getElementById('q-status');
            const det = document.getElementById('detect-text');

            if (red && white) {
                status.innerText = "SUPERPOSITION |ψ>";
                det.innerText = "Harmonic Mix Active";
                qSym.innerText = "Ψ";
                document.getElementById('row-super').classList.add('active-row');
            } else if (red) {
                status.innerText = "GROUND |0>";
                det.innerText = "Red Ground State Detected";
                qSym.innerText = "0";
                document.getElementById('row-red').classList.add('active-row');
            } else if (white) {
                status.innerText = "VALENCE |1>";
                det.innerText = "White Valence State Detected";
                qSym.innerText = "1";
                document.getElementById('row-white').classList.add('active-row');
            } else {
                status.innerText = "VACUUM";
                qSym.innerText = "";
            }
        }
    </script>
</body>
</html>
