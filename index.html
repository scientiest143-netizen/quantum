<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>GROW-WIN Quantum Pin-Point Sensor</title>
    <style>
        body { background: #05070a; color: #00ffcc; font-family: 'Courier New', monospace; margin: 0; padding: 20px; text-align: center; }
        .brand-header { color: #ffea00; font-size: 2.5rem; font-weight: bold; text-shadow: 0 0 10px #ffea00; margin-bottom: 5px; }
        .main-container { display: flex; flex-wrap: wrap; justify-content: center; gap: 20px; align-items: flex-start; }
        
        #start-btn { background: #00ffcc; color: #000; padding: 15px 30px; font-weight: bold; border: none; border-radius: 5px; cursor: pointer; font-size: 1.2rem; margin-bottom: 20px; box-shadow: 0 0 15px #00ffcc; }

        .vision-box { position: relative; border: 5px solid #1a1d23; border-radius: 15px; background: #000; overflow: hidden; display: inline-block; width: 100%; max-width: 540px; }
        video { width: 100%; height: auto; display: block; filter: contrast(1.2) brightness(1.1); }
        
        .pin-target { position: absolute; top: 50%; left: 50%; width: 40px; height: 40px; border: 2px dashed #ffea00; transform: translate(-50%, -50%); border-radius: 5px; pointer-events: none; z-index: 10; }
        #spectrometer { width: 100%; height: 140px; background: #000; border: 1px solid #333; margin-top: 10px; border-radius: 5px; }

        .stats-panel { width: 380px; background: #11141b; padding: 20px; border-radius: 15px; border: 1px solid #333; text-align: left; min-height: 550px; position: relative; }
        .qubit-card { margin-bottom: 15px; padding: 15px; border-radius: 8px; border-left: 5px solid #444; background: #0a0c10; color: #00ffcc; position: relative; }
        
        #bloch-stage {
            width: 100%; height: 260px;
            margin-top: 30px;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            border-top: 1px solid #222; padding-top: 20px;
        }

        #vector-container { 
            width: 180px; height: 180px; 
            perspective: 800px;
            position: relative;
        }

        #vector-circle { 
            width: 100%; height: 100%; 
            border: 1px solid rgba(0, 255, 204, 0.3); border-radius: 50%; 
            position: relative; 
            background: radial-gradient(circle at 30% 30%, #1a1f29, #000); 
            transform-style: preserve-3d;
            transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }

        #vector-circle::before, #vector-circle::after {
            content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            border: 1px solid rgba(0, 255, 204, 0.15); border-radius: 50%;
        }
        #vector-circle::before { transform: rotateY(90deg); }
        #vector-circle::after { transform: rotateX(90deg); }

        .needle { width: 3px; height: 90px; position: absolute; left: 88.5px; top: 0; transform-origin: bottom; transition: 0.3s; opacity: 0.2; }
        #n-red { background: #ff4b2b; }
        #n-white { background: #ffffff; }
        #n-main { 
            background: #ffea00; width: 4px; opacity: 1; 
            box-shadow: 0 0 20px #ffea00; 
            z-index: 5;
            transform: translateZ(40px);
        }
        
        #q-sym { position: absolute; width: 100%; text-align: center; top: 70px; color: rgba(255, 234, 0, 0.7); font-size: 2.5rem; font-weight: bold; pointer-events: none; z-index: 6; text-shadow: 0 0 10px #000; }

        .active-row { background: #004466 !important; color: #fff !important; box-shadow: inset 0 0 15px #00ffcc; }
        .val-changing { color: #ffea00 !important; text-shadow: 0 0 12px #ffea00; transition: color 0.1s; }

        .truth-table { margin: 30px auto; width: 100%; max-width: 950px; border-collapse: collapse; background: #111; }
        .truth-table th, .truth-table td { border: 1px solid #222; padding: 12px; color: #00ffcc; }
        .ev-val { color: #ffea00; font-size: 0.85rem; margin-left: 8px; display: none; }
        
        footer { margin-top: 40px; color: #444; font-size: 0.8rem; letter-spacing: 2px; }
    </style>
</head>
<body>

    <div class="brand-header">GROW-WIN</div>
    <h1>QUANTUM STATE OBSERVER</h1>
    <button id="start-btn">INITIALIZE SYSTEM</button>
    
    <div class="main-container">
        <div class="vision-box">
            <video id="video" autoplay playsinline muted></video>
            <div class="pin-target"></div>
            <canvas id="canvas" width="540" height="405" style="display:none;"></canvas>
            <canvas id="spectrometer"></canvas>
        </div>

        <div class="stats-panel">
            <div class="qubit-card" style="border-left-color: #00ffcc;">
                <small>SYSTEM STATUS</small>
                <div id="q-status" style="font-size: 1.2rem; margin-top:5px; font-weight: bold;">IDLE</div>
            </div>

            <div class="qubit-card" style="border-left-color: #00aaff;">
                <small>HARMONIC FREQUENCY</small>
                <div id="hz-text" style="font-size: 1.4rem; color:#ffea00;">0 Hz</div>
                <div id="detect-text" style="font-size: 0.8rem; color:#00aaff;">Scanning for Quantum Gates...</div>
            </div>
            
            <label style="font-size:0.7rem; color:#888;">DETECTION SENSITIVITY</label>
            <input type="range" id="sens" min="30" max="240" value="110" style="width:100%;">

            <div id="bloch-stage">
                <small style="color: #444; margin-bottom: 10px;">3D BLOCH SPHERE VISUALIZATION</small>
                <div id="vector-container">
                    <div id="vector-circle">
                        <div id="q-sym"></div>
                        <div id="n-white" class="needle"></div>
                        <div id="n-red" class="needle" style="transform: rotate(180deg)"></div>
                        <div id="n-main" class="needle"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <table class="truth-table" id="t-table">
        <thead>
            <tr>
                <th>DETECTION</th>
                <th>Frequency (THz)</th>
                <th>Energy State (eV)</th>
                <th>QUANTUM STATE</th>
            </tr>
        </thead>
        <tbody>
            <tr id="row-red">
                <td>Red Signal</td>
                <td><span id="f-red">0</span></td>
                <td>Low Energy State <span id="ev-red" class="ev-val">(1.95eV)</span></td>
                <td style="font-size: 1.2rem; font-weight: bold;">|0⟩</td>
            </tr>
            <tr id="row-white">
                <td>White Signal</td>
                <td><span id="f-white">0</span></td>
                <td>High Energy State <span id="ev-white" class="ev-val">(2.75eV)</span></td>
                <td style="font-size: 1.2rem; font-weight: bold;">|1⟩</td>
            </tr>
            <tr id="row-super">
                <td>Dual Signal</td>
                <td><span id="f-super">0</span></td>
                <td>Superposition State <span id="ev-super" class="ev-val">(1.95eV - 2.75eV)</span></td>
                <td style="font-size: 1.2rem; font-weight: bold;">|ψ⟩</td>
            </tr>
        </tbody>
    </table>

    <footer>DESIGNED BY UDAYANA ANANTH KUMAR</footer>

    <script>
        const video = document.getElementById('video');
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        const specCanvas = document.getElementById('spectrometer');
        const sCtx = specCanvas.getContext('2d');
        const startBtn = document.getElementById('start-btn');
        
        const nMain = document.getElementById('n-main');
        const nRed = document.getElementById('n-red');
        const nWhite = document.getElementById('n-white');
        const qSphere = document.getElementById('vector-circle');
        const qSym = document.getElementById('q-sym');
        const hzText = document.getElementById('hz-text');

        let lastBrightness = 0, pulses = 0, lastTime = Date.now(), displayHz = 0;
        let rWave = new Array(100).fill(110);
        let wWave = new Array(100).fill(30);

        startBtn.onclick = () => {
            navigator.mediaDevices.getUserMedia({ 
                video: { facingMode: "environment", frameRate: { ideal: 60 } } 
            }).then(s => {
                video.srcObject = s;
                startBtn.style.display = 'none';
                detect();
            });
        };

        function drawWaves(hz, hasRed, hasWhite) {
            sCtx.fillStyle = "black";
            sCtx.fillRect(0,0, specCanvas.width, specCanvas.height);
            rWave.shift(); wWave.shift();
            
            let time = Date.now() / 50;
            let isMixing = hasRed && hasWhite;
            
            let rPos = hasRed ? 100 + (Math.sin(time) * (hz * 0.15)) : 120;
            let wPos = hasWhite ? 40 + (Math.cos(time) * (hz * 0.15)) : 30;
            if(isMixing) { rPos -= 30; wPos += 30; }

            rWave.push(rPos); wWave.push(wPos);

            sCtx.lineWidth = 2;
            sCtx.beginPath(); sCtx.strokeStyle = "#ffffff";
            for(let i=0; i<100; i++) sCtx.lineTo((specCanvas.width/100)*i, wWave[i]);
            sCtx.stroke();

            sCtx.beginPath(); sCtx.strokeStyle = "#ff4b2b";
            for(let i=0; i<100; i++) sCtx.lineTo((specCanvas.width/100)*i, rWave[i]);
            sCtx.stroke();
            
            let rotX = isMixing ? Math.sin(time/2.5)*40 : (hasRed ? 25 : (hasWhite ? -25 : 0));
            let rotY = isMixing ? Math.cos(time/2.5)*40 : (hasRed ? 45 : (hasWhite ? -45 : 0));
            qSphere.style.transform = `rotateX(${rotX}deg) rotateY(${rotY}deg)`;

            let baseRotate = displayHz * 0.8;
            nMain.style.transform = `rotate(${baseRotate}deg) translateZ(40px)`;
            
            nRed.style.opacity = hasRed ? "1" : "0.05";
            nWhite.style.opacity = hasWhite ? "1" : "0.05";
        }

        function detect() {
            ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
            const data = ctx.getImageData(canvas.width/2-20, canvas.height/2-20, 40, 40).data;
            const threshold = parseInt(document.getElementById('sens').value);

            let rH = 0, wH = 0, totalB = 0;
            for (let i = 0; i < data.length; i += 4) {
                let r = data[i], g = data[i+1], b = data[i+2];
                totalB += (r + g + b) / 3;
                if (r > threshold && g < threshold/1.3) rH++; 
                if (r > threshold && g > threshold/1.1 && b > threshold/1.1) wH++; 
            }

            let avgB = totalB / (data.length / 4);
            if (Math.abs(avgB - lastBrightness) > 5) pulses++;
            lastBrightness = avgB;

            if (Date.now() - lastTime >= 1000) {
                let multiplier = (rH > 8 && wH > 8) ? 42.5 : 22.1;
                displayHz = Math.floor(pulses * multiplier);
                
                if(displayHz > 0) {
                    hzText.classList.add('val-changing');
                    setTimeout(() => hzText.classList.remove('val-changing'), 400);
                }

                updateUI(rH > 8, wH > 8, displayHz);
                pulses = 0; lastTime = Date.now();
            }
            drawWaves(pulses * 10, rH > 8, wH > 8); 
            requestAnimationFrame(detect);
        }

        function updateUI(red, white, hz) {
            document.querySelectorAll('tr').forEach(t => t.classList.remove('active-row'));
            const elements = ['f-red', 'f-white', 'f-super'];
            elements.forEach(id => {
                document.getElementById(id).innerText = "0";
                document.getElementById(id).classList.remove('val-changing');
            });

            const status = document.getElementById('q-status');
            const det = document.getElementById('detect-text');
            const evRed = document.getElementById('ev-red');
            const evWhite = document.getElementById('ev-white');
            const evSuper = document.getElementById('ev-super');

            evRed.style.display = "none"; evWhite.style.display = "none"; evSuper.style.display = "none";

            if (red && white) {
                status.innerText = "SUPERPOSITION |ψ⟩";
                det.innerText = "Dual Phase Coherence Detected";
                hzText.innerHTML = "RED: 484 THz | WHITE: 790 THz";
                qSym.innerText = "Ψ";
                document.getElementById('row-super').classList.add('active-row');
                document.getElementById('f-super').innerText = "484 & 790";
                document.getElementById('f-red').innerText = "484";
                document.getElementById('f-white').innerText = "790";
                document.getElementById('f-super').classList.add('val-changing');
                evSuper.style.display = "inline"; evRed.style.display = "inline"; evWhite.style.display = "inline";
            } else if (red) {
                status.innerText = "GROUND STATE |0⟩";
                det.innerText = "Low Frequency Red Active";
                hzText.innerText = "484 THz";
                qSym.innerText = "0";
                document.getElementById('row-red').classList.add('active-row');
                document.getElementById('f-red').innerText = "484";
                document.getElementById('f-red').classList.add('val-changing');
                evRed.style.display = "inline";
            } else if (white) {
                status.innerText = "EXCITED STATE |1⟩";
                det.innerText = "High Frequency White Active";
                hzText.innerText = "790 THz";
                qSym.innerText = "1";
                document.getElementById('row-white').classList.add('active-row');
                document.getElementById('f-white').innerText = "790";
                document.getElementById('f-white').classList.add('val-changing');
                evWhite.style.display = "inline";
            } else {
                status.innerText = "VACUUM IDLE";
                hzText.innerText = "0 Hz";
                qSym.innerText = "";
                det.innerText = "Scanning for Quantum Gates...";
            }
        }
    </script>
</body>
</html>
